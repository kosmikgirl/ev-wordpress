(()=>{"use strict";const e="lp-hidden",t=(e,t={},n={})=>{"function"==typeof n.before&&n.before(),fetch(e,{method:"GET",...t}).then(e=>e.json()).then(e=>{"function"==typeof n.success&&n.success(e)}).catch(e=>{"function"==typeof n.error&&n.error(e)}).finally(()=>{"function"==typeof n.completed&&n.completed()})},n=(e,t)=>{const n=new URL(e);return Object.keys(t).forEach(e=>{n.searchParams.set(e,t[e])}),n};let s={};"undefined"!=typeof lpDataAdmin?s=lpDataAdmin:"undefined"!=typeof lpData&&(s=lpData);var o;window.lpAJAXG=(()=>{const o=".lp-target",a=(()=>{let e=window.location.href;return e.includes("?")&&(e=e.split("?")[0]),e})();return{autoLoadAPIs:()=>{console.log("autoLoadAPIs")},fetchAPI:(e,o,a)=>{const r={headers:{}};0!==parseInt(s.user_id)&&(r.headers["X-WP-Nonce"]=s.nonce),void 0!==o.args.method_request?r.method=o.args.method_request:r.method="POST","POST"===r.method?(r.body=JSON.stringify(o),r.headers["Content-Type"]="application/json"):(o.args=JSON.stringify(o.args),o.callback=JSON.stringify(o.callback),e=n(e,o)),t(e,r,a)},fetchAJAX:(e,o)=>{let a=s.lpAjaxUrl;e.hasOwnProperty("args")&&e.args.hasOwnProperty("id_url")?a=n(a,{id_url:e.args.id_url}):e.hasOwnProperty("id_url")&&(a=n(a,{id_url:e.id_url})),s.urlParams.hasOwnProperty("lang")&&(a=n(a,{lang:s.urlParams.lang}));const r=new FormData,d=e.hasOwnProperty("action")?e.action:"load_content_via_ajax";r.append("nonce",s.nonce),r.append("lp-load-ajax",d),r.append("data",JSON.stringify(e));const c={method:"POST",headers:{},body:r};0!==parseInt(s.user_id)&&(c.headers["X-WP-Nonce"]=s.nonce),t(a,c,o)},getElements:()=>{const e=document.querySelectorAll(".lp-load-ajax-element:not(.loaded)");e.length&&e.forEach(e=>{const t=e.querySelector(`${o}`);if(!t)return;const n={...JSON.parse(t.dataset.send)},s=e.querySelector(".loading-first"),a={success:e=>{const{status:n,message:s,data:o}=e;"success"===n?t.innerHTML=o.content:"error"===n&&(t.innerHTML=s)},error:e=>{console.log(e)},completed:()=>{wp.hooks.doAction("lp-ajax-completed",e,n),window.lpAJAXG.getElements(),s&&s.remove()}};window.lpAJAXG.fetchAJAX(n,a),e.classList.add("loaded")})},clickNumberPage:(e,t)=>{const r=t.closest(".page-numbers:not(.disabled)");if(!r)return;const d=r.closest(`${o}`);if(!d)return;e.preventDefault();const c={...JSON.parse(d.dataset.send)};if(c.args.hasOwnProperty("paged")||(c.args.paged=1),r.classList.contains("prev"))c.args.paged--;else if(r.classList.contains("next"))c.args.paged++;else{const e=parseInt(r.textContent);if(isNaN(e)||e<1)return;c.args.paged=e}if(d.dataset.send=JSON.stringify(c),c.args.hasOwnProperty("enableUpdateParamsUrl")&&!c.args.enableUpdateParamsUrl||(s.urlParams.paged=c.args.paged,window.history.pushState({},"",n(a,s.urlParams))),window.lpAJAXG.showHideLoading(d,1),!c.args.hasOwnProperty("enableScrollToView")||c.args.enableScrollToView){const e=d.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:e})}const l={success:e=>{const{status:t,message:n,data:s}=e;d.innerHTML=s.content||""},error:e=>{console.log(e)},completed:()=>{window.lpAJAXG.showHideLoading(d,0)}};window.lpAJAXG.fetchAJAX(c,l)},getDataSetCurrent:e=>JSON.parse(e.dataset.send),setDataSetCurrent:(e,t)=>e.dataset.send=JSON.stringify(t),showHideLoading:(t,n)=>{const s=t.closest(`div:not(${o})`).querySelector(".lp-loading-change");s&&((t,n=0)=>{t&&(n?t.classList.remove(e):t.classList.add(e))})(s,n)}}})(),window.lpAJAXG.getElements(),document.addEventListener("click",function(e){const t=e.target;window.lpAJAXG.clickNumberPage(e,t)}),o=e=>{e.classList.contains("lp-load-ajax-element")&&window.lpAJAXG.getElements()},new MutationObserver(function(e){e.forEach(function(e){e.addedNodes&&e.addedNodes.forEach(function(e){1===e.nodeType&&o(e)})})}).observe(document,{childList:!0,subtree:!0}),((e,t)=>{const n=document.querySelector(e);if(n)return void t();const s=new MutationObserver((n,s)=>{const o=document.querySelector(e);o&&(s.disconnect(),t())});s.observe(document.documentElement,{childList:!0,subtree:!0})})(".lp-load-ajax-element",e=>{window.lpAJAXG.getElements()}),document.addEventListener("readystatechange",e=>{window.lpAJAXG.getElements()}),document.addEventListener("DOMContentLoaded",()=>{window.lpAJAXG.getElements()})})();