(()=>{"use strict";const e={};let t;"undefined"!=typeof lpDataAdmin&&(t=lpDataAdmin.lp_rest_url,e.admin={apiAdminNotice:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpDataAdmin.lp_rest_url+"lp/v1/orders/statistic",apiAddons:lpDataAdmin.lp_rest_url+"lp/v1/addon/all",apiAddonAction:lpDataAdmin.lp_rest_url+"lp/v1/addon/action-n",apiAddonsPurchase:lpDataAdmin.lp_rest_url+"lp/v1/addon/info-addons-purchase",apiSearchCourses:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-course",apiSearchUsers:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/search-user",apiAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/assign-user-course",apiUnAssignUserCourse:lpDataAdmin.lp_rest_url+"lp/v1/admin/tools/unassign-user-course"}),"undefined"!=typeof lpData&&(t=lpData.lp_rest_url,e.frontend={apiWidgets:lpData.lp_rest_url+"lp/v1/widgets/api",apiCourses:lpData.lp_rest_url+"lp/v1/courses/archive-course",apiAJAX:lpData.lp_rest_url+"lp/v1/load_content_via_ajax/",apiProfileCoverImage:lpData.lp_rest_url+"lp/v1/profile/cover-image"}),t&&(e.apiAJAX=t+"lp/v1/load_content_via_ajax/",e.apiCourses=t+"lp/v1/courses/");const s=e;let n=null,a=null;const l=window.location.search,r=new URLSearchParams(l).get("tab"),o=(e="")=>{if(!lpGlobalSettings.is_admin)return;let t=r?`?tab=${r}`:"";t+=e?(r?"&":"?")+`${e}`:"",fetch(s.admin.apiAdminNotice+t,{method:"POST",headers:{"X-WP-Nonce":lpGlobalSettings.nonce}}).then((e=>e.json())).then((e=>{const{status:t,message:s,data:l}=e;"success"===t?"Dismissed!"!==s&&(a=l.content,0===a.length?n.style.display="none":(n.innerHTML=a,n.style.display="block",(()=>{try{const e=document.querySelector("#adminmenu");if(!e)return;const t=e.querySelector("#toplevel_page_learn_press");if(!t)return;const s=t.querySelector(".wp-menu-name");if(!s)return;const n=document.querySelector("input[name=lp-addons-new-version-totals]");if(!n)return;const a='<span class="tab-lp-admin-notice"></span>';s.insertAdjacentHTML("beforeend",a);const l=t.querySelector('a[href="admin.php?page=learn-press-addons"]');if(!l)return;const r=`<span style="margin-left: 5px" class="update-plugins">${n.value}</span>`;l.setAttribute("href","admin.php?page=learn-press-addons&tab=update"),l.insertAdjacentHTML("beforeend",r)}catch(e){console.log(e)}})())):a=s})).catch((e=>{console.log(e)}))};((e,t)=>{const s=document.querySelector(e);if(s)return void t();const n=new MutationObserver(((s,n)=>{const a=document.querySelector(e);a&&(n.disconnect(),t())}));n.observe(document.documentElement,{childList:!0,subtree:!0})})(".lp-admin-notices",(()=>{n=document.querySelector(".lp-admin-notices"),o()})),document.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("btn-lp-notice-dismiss")&&(e.preventDefault(),confirm("Are you sure you want to dismiss this notice?"))){const e=t.closest(".lp-notice");o(`dismiss=${t.getAttribute("data-dismiss")}`),e.remove(),0===n.querySelectorAll(".lp-notice").length&&(n.style.display="none")}}))})();